<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <link href="http://www.templex.xyz/main.css" rel="stylesheet" type="text/css">
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">
        <link rel="shortcut icon" href="http://www.templex.xyz/images/3x3.jpg">
        <title>云存储踩坑指南</title>
</head>
<body>
    <h2>云存储踩坑指南</h2>
    <h3>萝卜蹲</h3>
    <p>首先我要强调的是，真正由于施工将线缆挖断导致的服务不可用是极罕见的。之所以我们经常听到这样的事故原因，
        纯粹是为了推锅罢了。真实的锅应该“颁发”给IDC机房，CDN, DNS, 运营商，网监，数据库以及贪婪。
        而这几个潜在威胁的交替出现有点像萝卜蹲这个游戏——CDN蹲，CDN蹲，CDN蹲完IDC蹲。。。
    </p>

    <h3>数据库</h3>
    <p>对于公有云存储来说，实际上文件吞吐的压力是不大的。从CDN开始，到memorycache,下面有SSD存小文件，
        这几层缓存将地下慢吞吞的SATA保护的好好的。压力主要在数据库上，由于还要维护一致性的问题设计上的困难就更大了。
        我这里提一个“打死”云存储的方法——高并发同名小文件上传。至于为什么，我留给大家自己去想。
    </p>
    
    <h3>贪婪</h3>
    <p>急着卖钱的结果就是大量半成品被推向市场，互联网公司可以这么做，但作为一家提供基础服务的，
        好歹要收敛一下。比如，还不能提供便捷的异地备份入口的云存储先不要上线。这是因为由于种种外部原因，
        云存储要比其他IAAS可用性低不少，而客户对于可用性又有不切实际的期望。提供异地机房备份入口，并用专线打通，
        去引导客户自己做好高可用。
    </p>
    <p>因为对于公有云存储来说主要的营收来自CDN，而前期自建是不太现实的。CDN这笔生意需要大把的钱之外还需要过硬的关系，
        这不是一写愣头青能搞定的。既然依赖CDN，客户为什么不去自己和CDN厂商联系呢？云服务商除非亏本，
        否则价格上肯定是处于劣势的。另外，CDN能提供作为二次开发的接口有限，有些功能客户只有自己对接CDN才能得到良好的支持，
        云服务商能站在第三方CDN搞定诸如实时监控，动态调度的事情要么是睁眼说瞎话，要么是“曲线救国”的方式实现的，
        水分还是很大的。我们可以将CDN想象成绿皮火车，云存储厂商把火车站翻新了一下，乘务员换得漂亮了一点就说这是高铁了，
        你信不？
    </p>
    <p>但是因为贪婪，对于CDN问题，厂商胡说八道几乎是必现的。有没有解决办法呢？办法就是跟客户说实话，另外消费者也要学会向厂商针对技术实现去发问，
        可以利用我在<a href="http://templex.xyz/blog-cn/101/goodbadugly.html">云计算的品质</a>中提到的方法。
        或者像AWS一样自建节点，走廉价路线。想要更好的品质自己去联系CDN厂商吧，要对接的接口，参数都给到消费者。
        AWS的模式对于“有钱人”以及下狠心要做好事情的云计算公司是比较好的选择，其他就算了吧，因为马上就死掉了。
    </p>
    
    <h3>来自星星的坑</h3>
    <p>来自星星的坑，又称天坑，是坑中之坑。
    </p>
    <p>我先说解决方案，就是别给用户提供“默认”域名。不知道大家能不能马上明白？
    </p>
    <p>由于特殊的国情，以及钻空子高手的大量存储，提供厂商自己的域名基本上就是在玩赌博。
        用户传播点黄赌毒实在太方便，一旦被发现，
        运营商或者网监或者DNS或者域名供应商或者CDN都可能按下域名关闭的“核按钮”。
    </p>
    <p>一定要让客户使用自己的域名确实是大大的影响客源，这个很考验自己能不能做的住。或者也可以前期做好客户甄选，
        避免自由使用云存储的所有功能。对于所有服务都以API形式提供的云厂商来说，这点上的实现是很轻松的，
        只是会加大销售的工作量。
    </p>

    <h3>GROUP</h3>
    <p>如果只要有邮箱和密码就能查看到能够控制一切的AK SK还是挺危险的，大家觉得呢？</p>
    <p>最好在账号之中建立分组，就像我们的PC一样有访客，管理员等分级。另外管理员账号要做二次验证。
        相比直接攻击云存储来说，攻破消费者的账号密码就显得容易得多。这里我就不说具体案例了，以免大家过分担心。
        与其花大把精力拷问一个公有云存储的数据安全问题，还不如推动他们做好用户组的功能。
    </p>
    
    <h3>挣小钱，办大事</h3>
    <p>云存储是个挣小钱的生意 —— 鲁迅。</p>
    <p>在我眼里，云存储更像是根杠杆，不能指望它本身创造太多的产值。
        但我们都知道数据一旦落地，客户就很难随便乱跑了。只要客户在，想象空间就有。</p>  
    <p>剩下的，自己去想象吧！</p>

    
    </body>
    </html>